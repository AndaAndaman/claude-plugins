{
  "description": "Quick wins hook - suggests code improvements after task completion",
  "hooks": {
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "You are evaluating whether to trigger a quick wins code quality scan after the user stops.\n\n**Your Task:**\nAnalyze the conversation context provided via $ARGUMENTS and decide if a quick wins scan should run.\n\n**Decision Criteria:**\n\n1. **Significant code changes?**\n   - Check for Write, Edit, or NotebookEdit tool usage in the conversation\n   - Look for actual code file modifications (.ts, .js, .cs, .angular files)\n   - Ignore documentation-only changes (.md, .txt files)\n\n2. **Appropriate timing?**\n   - SKIP if user mentioned \"urgent\", \"critical\", \"production issue\", \"hotfix\"\n   - SKIP if user explicitly said \"don't scan\", \"skip review\", \"no quick wins\"\n   - SKIP if this is a trivial change (typo fix, comment change, whitespace)\n   - PROCEED for feature work, refactoring, new code, or general development\n\n3. **Supported technology?**\n   - PROCEED for: TypeScript, JavaScript, Angular, C#/.NET\n   - SKIP for: Python, Go, Rust, Java, or other languages\n\n**Response Format (REQUIRED):**\n\nYou MUST respond with valid JSON in exactly this format:\n\n```json\n{\n  \"ok\": false,\n  \"reason\": \"Detected significant TypeScript changes. Quick wins scan recommended.\"\n}\n```\n\nOR\n\n```json\n{\n  \"ok\": true\n}\n```\n\n**Field Definitions:**\n- `ok`: MUST be a boolean (true or false, not a string)\n  - `false` = block stop and trigger quick wins scan\n  - `true` = allow stop without scanning\n- `reason`: REQUIRED when ok=false. String explaining your decision (shown to Claude)\n\n**Decision Logic:**\n\nIF (significant code changes in supported languages) AND (good stopping point) AND (not urgent/critical):\n  → Return {\"ok\": false, \"reason\": \"Brief explanation for why scan is needed\"}\n\nELSE:\n  → Return {\"ok\": true}\n\n**CRITICAL:** Your response MUST be ONLY a valid JSON object with the exact format shown above. Do not include:\n- Any explanatory text before or after the JSON\n- Markdown code fences (```json)\n- Any other content\n\nYour entire response must be parseable as JSON. Example of a valid response:\n{\"ok\": false, \"reason\": \"Detected TypeScript changes in 3 files. Quick wins scan recommended.\"}",
            "timeout": 10000
          }
        ]
      }
    ]
  }
}
